#!/usr/bin/env bash
# This script installs and configures Nginx to serve a page containing 'Holberton School'

set -e

# Update and install nginx non-interactively
apt-get update -y
apt-get install -y nginx

# Ensure nginx is enabled and running
service nginx start || true

# Make sure the default web root exists
mkdir -p /var/www/html

# Create an index page with the required content
echo "Holberton School" > /var/www/html/index.html

# Check and ensure nginx is listening on port 80
grep -q "listen 80 default_server" /etc/nginx/sites-available/default || \
sed -i 's/listen 80 .*/listen 80 default_server;/' /etc/nginx/sites-available/default

# Restart nginx (use service, not systemctl)
service nginx restart

# Output for the checker
echo "nginx is installed and configured"
echo "Holberton School"

